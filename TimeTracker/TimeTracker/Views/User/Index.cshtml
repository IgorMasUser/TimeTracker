@model IEnumerable<TimeTracker.Models.User>
@{
    ViewData["Title"] = "Index";

}

<h1>ATTENDANCE</h1>

<p>
    <a asp-action="Create" class="btn btn-primary" style="width:250px;"><i class="bi bi-plus-square"></i>&nbsp; Create New</a>
</p>
<form method="get" asp-action="Index">
    <p>
        <input type="search" placeholder="&nbsp;Enter user name or surname" value="@ViewData["GetUserDetails"]" name="search" style="width:500px;height:35px; border-radius:17px 17px 17px 17px" />
      
        <input type="submit" value="Search" class="btn btn-primary" />
        <a asp-action="Index" class="btn btn-success">View all users</a>
    </p>
</form>

<table class="table">
    <thead>
        <tr>
            <th>

                @*@Html.DisplayNameFor(model => model.Id)*@
                @Html.DisplayNameFor(model => model.UserId)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Surname)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Started)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Finished)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Date)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TotalWorked)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>

                <td>
                    @Html.DisplayFor(modelItem => item.UserId)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Surname)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Started)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Finished)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.Date)
                </td>
                <td>
                    @{
                        DateTime time = new DateTime().AddMinutes(30);
                    }
                    @{
                        TimeSpan time2 = new DateTime().Subtract(time);
                    }

                    @item.Finished.Subtract(item.Started-time2)
                  
                <td />
                <td>

                    <a asp-controller="User" asp-action="Edit" asp-route-id="@item.Id"
                   class="btn btn-primary mx-2"><i class="bi bi-pencil-square"></i>&nbsp;Edit</a>

                    <a asp-controller="User" asp-action="Details" asp-route-id="@item.Id"
                   class="btn btn-success mx-2"><i class="bi bi-question-circle-fill"></i>&nbsp;Details</a>

                    <a asp-controller="User" asp-action="Delete" asp-route-id="@item.Id"
                   class="btn btn-danger mx-2"><i class="bi bi-trash-fill"></i>&nbsp;Delete</a>

                </td>
            </tr>


        }
    </tbody>
</table>
